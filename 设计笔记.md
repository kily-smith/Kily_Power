超级电容控制板

双向同步整流BUCK-BOOST数字电源板

V0.1 2025/2/5 创建文档，初步编辑

# 1 绪论

## 1.1双向DC-DC概述

## 1.2系统方案结构

## 1.3设计指标及功能

## 1.4

# 2 双向BUCK-BOOST实现原理

## 2.1经典BUCK电路

## 2.2经典BOOST电路

## 2.3双向同步整流BUCK-BOOST电路

# 3 系统硬件设计

## 3.1BUCK-BOOST主拓扑电路设计

## 3.2驱动电路设计

## 3.3辅助电源设计

## 3.4信号调理电路设计

### 3.4.1电流采样电路

![image-20250205175900023](IMAGES/image-20250205175900023.png)

​		电流检测芯片使用INA240，这是一款使用较为广泛具有PWM 抑制的双向电流检测芯片。

  根据INA240芯片手册应用双向电流测量8.4.3.3将输出设置为1/2的参考电压

![image-20250205180310355](IMAGES/image-20250205180310355.png)

考虑到电源管理模块底盘端口额定电流为10A，最大电流30A持续500ms。一般情况下，电源管理模块输出的电流不超过5A，可以使用较大的采样电阻也不会有太大的功率损失。使用1mR，搭配50倍增益，当经流过电流为30A时，采样电阻两端压差为1mR * 30A=0.03V，100倍增益到MCU的ADC处为1/2VREF±0.03V * 50=3.15Vor0.15V，满足采样要求，但是由于采样范围广，导致采样精度较低。

故采样电阻使用1mR搭配50倍的增益的INA240A2进行采样，所以最大采样电流设置为±30A。

### 3.4.2电压采样电路

![image-20250205203811215](IMAGES/image-20250205203811215.png)

电压主要采集为电池端输入电压及经过FSBB变换后的输出电压即超级电容端的电压，一方面为了功率闭环，另一方面为了估计电容剩余电压。

### 3.4.3系统内各个参数

 ADC_V_IN	 ADC_V_CAP	分别为FSBB输入电压及输出到超级电容端的电压

 ADC_I_IN	 ADC_I_CHASSIS	 ADC_I_WPT	分别为输入总电流 底盘输出电流 及无线充电电流（不考虑无线供电部分，超级电容输入电流为I_CAP=I_IN—I_CHASSIS）

在不考虑无线供电部分，系统各个功率如下：

输入功率为裁判系统(电源) 输入功率P_IN=V_IN* I_IN

底盘输出功率P_CHASSIS=V_IN* I_CHASSIS

FSBB输入功率为P_DCDC=V_IN* I_CAP

超级电容充放电功率为P_CAP=V_CAP* I_CAP



补充：

*超级电容功率路径图*

*![image-20250205211955625](IMAGES/image-20250205211955625.png)*

*根据功率守恒有：裁判系统输出功率 = 底盘功率 + 超级电容输出功率。裁判系统的输出功率是由底盘和超级电容决定的。*
*最理想的工作状态是裁判系统恒定以刚好不掉血的限制功率输出，**当底盘功率小于限制功率时超级电容充电来吸收多余的功率，当底盘功率大于限制功率时超级电容放电来提供多余的功率。这样可以使一场比赛中机器人使用的总能量达到最大**。*
*超级电容会检测裁判系统当前输出功率和能量缓冲，自动调节电容的充电或放电功率，使裁判系统输出功率维持在限制功率。*
*但是，超级电容吸收和放出功率的能力是有极限的。当电容充满电时，就不能吸收裁判系统富余的功率；当电容放完电时，就不能提供额外的功率给底盘。另外，电容的最大充放电功率与电容当前电压有关。*
*当电容的最大放电功率不够时，会以能达到的最大功率放电，此时裁判系统输出功率会升高并超过限制功率，消耗能量缓冲，这时需要功率算法限制底盘功率防止超功率扣血。*
*目前，超级电容会使裁判系统的能量缓冲稳定在50J，所以需要将**功率算法**调节到当能量缓冲低于40J时开始限制底盘输出。*
*如果想要超级电容快速充电，可以限制底盘功率或限制超级电容输出功率，注意**要加速的时候不要忘记解除输出功率限制**。*
*电容当前存储的能量，能量E与电压u的平方成正比。*
*另外，电容的最大输出功率与电容当前电压正相关，也就是说，电容电压不同时底盘能达到的最大功率也不同。之前我驱动底盘时基本没有关注过它各个速度下的功率，只是简单的设一个能超过功率限制的速度让它跑，然后再通过能量缓冲限制速度环输出的电流大小。这样在加了超级电容之后是不太好的，由于超级电容最大输出功率会变化，它不同时刻跑的功率和速度不一样。*
*所以加了超级电容之后测试机器人需要考虑它的功率曲线。比如说某个动作的某个时刻的功率超过裁判系统限制功率，需要电容提供额外输出功率时，电容当前的最大输出功率就决定了当前动作能否按照预期实现。*



### 3.4.4ADC输入的RC滤波器

RC低通滤波根据手册数据，取采样周期24.5MHz,电阻R取1K，根据一阶 RC 低通滤波器公式
$$
f_c=\frac{1}{2\pi RC}
$$
R取1K，截止频率为10K，计算得C为15uF,实际采用10uF电容与1K电阻构成RC滤波器。

![image-20250205203156237](IMAGES/image-20250205203156237.png)

## 3.5数字电路设计

## 4 系统软件设计

# 5 参考资料